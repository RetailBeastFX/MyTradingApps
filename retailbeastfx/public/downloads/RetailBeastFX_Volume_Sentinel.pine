// This Pine Scriptâ„¢ code is subject to the terms of the Mozilla Public License 2.0 at https://mozilla.org/MPL/2.0/
// Â© RetailBeast 2026

//@version=6
indicator("RetailBeastFX Volume Sentinel", shorttitle="ğŸ» SENTINEL", overlay=true, max_bars_back=5000)

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// â–ˆâ–ˆâ–ˆ VOLUME SENTINEL â€” INSTITUTIONAL PARTICIPATION PROOF â–ˆâ–ˆâ–ˆ
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// Standalone or paired with RetailBeastFX Premium v9.0 Institutional
// Detects: Z-Score Surges, Absorption Zones, Delta Proxy, Session VA

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// â–ˆâ–ˆâ–ˆ INPUTS â–ˆâ–ˆâ–ˆ
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
string volGroup = "â•â•â• ğŸ» VOLUME ANALYSIS â•â•â•"
int length = input.int(20, "Z-Score Lookback", minval=10, maxval=50, group=volGroup)
float zThreshHigh = input.float(2.0, "Surge Threshold (High Ïƒ)", minval=1.0, maxval=3.5, step=0.1, group=volGroup, tooltip="Volume > 2.0Ïƒ = institutional surge")
float zThreshAbsorb = input.float(1.5, "Absorption Min Z-Score", minval=1.0, maxval=2.5, step=0.1, group=volGroup)
float bodyRatio = input.float(0.3, "Absorption Body Ratio", minval=0.1, maxval=0.5, step=0.05, group=volGroup, tooltip="Body < 30% of range = absorption")

string visGroup = "â•â•â• VISUAL SETTINGS â•â•â•"
bool showDelta = input.bool(true, "Show Cumulative Delta Proxy", group=visGroup)
bool showSessionVA = input.bool(true, "Show Session POC/VAH/VAL", group=visGroup)
bool showGlow = input.bool(true, "Absorption Glow Background", group=visGroup)
bool showSurgeMarkers = input.bool(true, "Show Surge Markers", group=visGroup)
bool showDashboard = input.bool(true, "Show Dashboard", group=visGroup)
color surgeColor = input.color(color.new(#E040FB, 0), "Surge Color", group=visGroup)
color absorbColor = input.color(color.new(#9C27B0, 85), "Absorption Color", group=visGroup)

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// â–ˆâ–ˆâ–ˆ SMC-QUANT INTEGRATION (PILLAR I: ADX GATE) â–ˆâ–ˆâ–ˆ
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
string adxGroup = "â•â•â• ğŸ¯ ADX GATE (Pillar I) â•â•â•"
bool useADXGate = input.bool(true, "Enable ADX Gate Filter", group=adxGroup, tooltip="Only highlight signals when ADX confirms trend strength")
int adxLength = input.int(14, "ADX Length", minval=7, maxval=21, group=adxGroup)
float adxThreshold = input.float(25.0, "ADX Threshold", minval=15.0, maxval=40.0, step=1.0, group=adxGroup, tooltip="ADX > 25 = tradable trend | ADX > 30 = super-trend")
float adxPyramid = input.float(30.0, "Pyramid Threshold", minval=25.0, maxval=45.0, step=1.0, group=adxGroup, tooltip="ADX > 30 unlocks scale-in opportunities")

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// â–ˆâ–ˆâ–ˆ KILLZONE SESSION FILTER â–ˆâ–ˆâ–ˆ
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
string kzGroup = "â•â•â• â° KILLZONE SESSIONS â•â•â•"
bool useKillzone = input.bool(false, "Filter to Killzones Only", group=kzGroup, tooltip="Only show signals during London/NY overlap")
int londonStart = input.int(8, "London Start (EST)", minval=0, maxval=23, group=kzGroup)
int londonEnd = input.int(11, "London End (EST)", minval=0, maxval=23, group=kzGroup)
int nyStart = input.int(8, "NY Start (EST)", minval=0, maxval=23, group=kzGroup)
int nyEnd = input.int(11, "NY End (EST)", minval=0, maxval=23, group=kzGroup)

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// â–ˆâ–ˆâ–ˆ VOLUME CALCULATIONS â–ˆâ–ˆâ–ˆ
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
float vol = volume
float avgVol = ta.sma(vol, length)
float stdVol = ta.stdev(vol, length)
float zScore = stdVol != 0 ? (vol - avgVol) / stdVol : 0

// Relative Volume
float relVol = avgVol != 0 ? vol / avgVol : 1

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// â–ˆâ–ˆâ–ˆ ADX CALCULATION (PILLAR I GATE) â–ˆâ–ˆâ–ˆ
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[diPlus, diMinus, adxValue] = ta.dmi(adxLength, adxLength)
bool adxGatePass = not useADXGate or adxValue >= adxThreshold
bool isPyramidZone = adxValue >= adxPyramid
bool isSuperTrend = adxValue >= 30.0
string adxStatus = adxValue >= adxPyramid ? "ğŸ”¥ SUPER" : adxValue >= adxThreshold ? "âœ… TREND" : "âš ï¸ CHOP"

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// â–ˆâ–ˆâ–ˆ KILLZONE SESSION CHECK â–ˆâ–ˆâ–ˆ
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
int currentHour = hour(time, "America/New_York")
bool inLondonKZ = currentHour >= londonStart and currentHour < londonEnd
bool inNYKZ = currentHour >= nyStart and currentHour < nyEnd
bool inKillzone = inLondonKZ or inNYKZ
bool killzonePass = not useKillzone or inKillzone

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// â–ˆâ–ˆâ–ˆ CUMULATIVE DELTA PROXY â–ˆâ–ˆâ–ˆ
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// Estimate buying vs selling pressure from candle direction
float deltaProxy = close > open ? vol : close < open ? -vol : 0
float cumDelta = ta.cum(deltaProxy)
float deltaMA = ta.ema(cumDelta, 20)
bool deltaBullish = cumDelta > deltaMA
bool deltaBearish = cumDelta < deltaMA

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// â–ˆâ–ˆâ–ˆ ABSORPTION DETECTION â–ˆâ–ˆâ–ˆ
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// Absorption = High volume but small body (institutional hiding intent)
float body = math.abs(close - open)
float candleRange = high - low
float avgBody = ta.sma(body, length)
bool isHighVol = zScore >= zThreshAbsorb
bool isSmallBody = candleRange > 0 ? body < candleRange * bodyRatio : false
bool isAbsorption = isHighVol and isSmallBody and adxGatePass and killzonePass

// Absorption Type
bool bullAbsorption = isAbsorption and close > open
bool bearAbsorption = isAbsorption and close < open

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// â–ˆâ–ˆâ–ˆ SURGE DETECTION â–ˆâ–ˆâ–ˆ
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
bool isSurge = zScore >= zThreshHigh and adxGatePass and killzonePass
bool bullSurge = isSurge and close > open
bool bearSurge = isSurge and close < open

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// â–ˆâ–ˆâ–ˆ PARTICIPATION SCORE (0-10) â€” SMC-QUANT ENHANCED â–ˆâ–ˆâ–ˆ
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
float participationScore = 0.0
participationScore += isSurge ? 4.0 : 0.0           // Volume surge
participationScore += isAbsorption ? 2.0 : 0.0     // Absorption detected
participationScore += zScore >= 1.0 ? 1.0 : 0.0    // Elevated volume
participationScore += relVol >= 1.5 ? 1.0 : 0.0    // Relative volume spike
participationScore += adxGatePass ? 1.0 : 0.0      // ADX gate passed (Pillar I)
participationScore += isPyramidZone ? 1.0 : 0.0    // Pyramid zone (super-trend)
participationScore := math.min(participationScore, 10.0)

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// â–ˆâ–ˆâ–ˆ SESSION VALUE AREA (POC/VAH/VAL) â–ˆâ–ˆâ–ˆ
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
var float sessionPOC = na
var float sessionVAH = na
var float sessionVAL = na
var float sessionVolTotal = 0.0

bool newDay = ta.change(time("D")) != 0
if newDay
    sessionPOC := close
    sessionVAH := high
    sessionVAL := low
    sessionVolTotal := vol
else
    // Volume-weighted POC approximation
    if sessionVolTotal > 0
        sessionPOC := (sessionPOC * (sessionVolTotal - vol) + close * vol) / sessionVolTotal
    sessionVAH := math.max(nz(sessionVAH, high), high)
    sessionVAL := math.min(nz(sessionVAL, low), low)
    sessionVolTotal += vol

// Plot Session VA
plot(showSessionVA ? sessionPOC : na, "Session POC", color.new(#FF9800, 30), 2, plot.style_linebr)
plot(showSessionVA ? sessionVAH : na, "VAH", color.new(#FF5252, 60), 1, plot.style_circles)
plot(showSessionVA ? sessionVAL : na, "VAL", color.new(#00E676, 60), 1, plot.style_circles)

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// â–ˆâ–ˆâ–ˆ VISUALS â–ˆâ–ˆâ–ˆ
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// Surge Markers
plotshape(showSurgeMarkers and bullSurge ? low : na, "Bull Surge", shape.triangleup, location.belowbar, surgeColor, size=size.small, text="âš¡")
plotshape(showSurgeMarkers and bearSurge ? high : na, "Bear Surge", shape.triangledown, location.abovebar, surgeColor, size=size.small, text="âš¡")

// Absorption Glow
bgcolor(showGlow and isAbsorption ? absorbColor : na, title="Absorption Zone")

// Absorption Diamonds (separate bull/bear)
plotshape(bullAbsorption ? low : na, "Bull Absorption", shape.diamond, location.belowbar, color.new(#9C27B0, 20), size=size.tiny)
plotshape(bearAbsorption ? high : na, "Bear Absorption", shape.diamond, location.abovebar, color.new(#9C27B0, 20), size=size.tiny)

// Delta Proxy (overlay mode - normalized)
// Since overlay=true, we can't plot delta directly. Show via color on price bars instead.
barcolor(showDelta ? (deltaBullish ? color.new(#00E676, 50) : deltaBearish ? color.new(#FF5252, 50) : na) : na, title="Delta Bias")

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// â–ˆâ–ˆâ–ˆ VWAP DEVIATION BUBBLES â–ˆâ–ˆâ–ˆ
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
bool showVWAP = input.bool(true, "Show VWAP & Deviation", group=visGroup)
float vwapVal = ta.vwap(hlc3)
float vwapDev = vwapVal != 0 ? (close - vwapVal) / vwapVal * 100 : 0
float atrBubble = ta.atr(14)

// Plot VWAP
plot(showVWAP ? vwapVal : na, "VWAP", color.new(#FFD700, 30), 2, plot.style_linebr)

// Bubble labels at close price (only on elevated volume)
if showVWAP and zScore >= 1.5 and barstate.isconfirmed
    // Bubble color based on deviation direction
    color bubbleCol = vwapDev > 0 ? color.new(#00BCD4, 30) : color.new(#B71C1C, 30)
    // Bubble size based on Z-Score
    string bubbleSize = zScore >= 3.0 ? size.normal : zScore >= 2.0 ? size.small : size.tiny
    // Position offset from close
    float yOffset = vwapDev > 0 ? atrBubble * 0.3 : -atrBubble * 0.3
    float yPos = close + yOffset
    // Label text shows deviation %
    string devText = str.tostring(math.abs(vwapDev), "#.#") + "%"
    label.new(bar_index, yPos, devText, style=label.style_circle, color=bubbleCol, textcolor=color.white, size=bubbleSize)

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// â–ˆâ–ˆâ–ˆ DASHBOARD â–ˆâ–ˆâ–ˆ
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
if showDashboard
    var table volTable = table.new(position.top_right, 2, 9, bgcolor=color.new(#000000, 30), border_width=1, border_color=color.new(#9C27B0, 50))
    
    // Header
    table.cell(volTable, 0, 0, "ğŸ»", text_color=color.new(#9C27B0, 0), text_size=size.normal, text_halign=text.align_center)
    table.cell(volTable, 1, 0, "VOLUME SENTINEL", text_color=color.new(#9C27B0, 0), text_size=size.small, text_halign=text.align_left)
    
    // ADX Gate (Pillar I)
    table.cell(volTable, 0, 1, "ADX", text_color=color.gray, text_size=size.tiny, text_halign=text.align_right)
    string adxText = str.tostring(adxValue, "#.#") + " " + adxStatus
    color adxColor = isPyramidZone ? color.new(#FF6D00, 0) : adxGatePass ? color.new(#00E676, 0) : color.new(#FF5252, 0)
    table.cell(volTable, 1, 1, adxText, text_color=adxColor, text_size=size.tiny, text_halign=text.align_left)
    
    // Z-Score
    table.cell(volTable, 0, 2, "Z-SCORE", text_color=color.gray, text_size=size.tiny, text_halign=text.align_right)
    string zText = str.tostring(zScore, "#.##") + "Ïƒ"
    color zColor = isSurge ? color.new(#E040FB, 0) : zScore >= 1.0 ? color.new(#00E676, 0) : color.gray
    table.cell(volTable, 1, 2, zText, text_color=zColor, text_size=size.tiny, text_halign=text.align_left)
    
    // Relative Volume
    table.cell(volTable, 0, 3, "REL VOL", text_color=color.gray, text_size=size.tiny, text_halign=text.align_right)
    string rvolText = str.tostring(relVol, "#.##") + "x"
    color rvolColor = relVol >= 1.5 ? color.new(#00E676, 0) : color.gray
    table.cell(volTable, 1, 3, rvolText, text_color=rvolColor, text_size=size.tiny, text_halign=text.align_left)
    
    // Participation Score
    table.cell(volTable, 0, 4, "SCORE", text_color=color.gray, text_size=size.tiny, text_halign=text.align_right)
    string scoreText = str.tostring(participationScore, "#") + "/10"
    color scoreColor = participationScore >= 8 ? color.new(#00FF00, 0) : participationScore >= 5 ? color.new(#FFD700, 0) : participationScore >= 3 ? color.new(#FF8C00, 0) : color.gray
    table.cell(volTable, 1, 4, scoreText, text_color=scoreColor, text_size=size.tiny, text_halign=text.align_left)
    
    // VWAP Deviation
    table.cell(volTable, 0, 5, "VWAP DEV", text_color=color.gray, text_size=size.tiny, text_halign=text.align_right)
    string vwapText = (vwapDev >= 0 ? "+" : "") + str.tostring(vwapDev, "#.##") + "%"
    color vwapColor = vwapDev > 0.5 ? color.new(#00BCD4, 0) : vwapDev < -0.5 ? color.new(#B71C1C, 0) : color.gray
    table.cell(volTable, 1, 5, vwapText, text_color=vwapColor, text_size=size.tiny, text_halign=text.align_left)
    
    // Status
    table.cell(volTable, 0, 6, "STATUS", text_color=color.gray, text_size=size.tiny, text_halign=text.align_right)
    string statusText = isSurge ? "âš¡ SURGE" : isAbsorption ? "ğŸ›¡ï¸ ABSORB" : adxGatePass ? "READY" : "â¸ï¸ WAIT"
    color statusColor = isSurge ? surgeColor : isAbsorption ? color.new(#9C27B0, 0) : adxGatePass ? color.new(#00E676, 0) : color.gray
    table.cell(volTable, 1, 6, statusText, text_color=statusColor, text_size=size.tiny, text_halign=text.align_left)
    
    // Delta Bias
    table.cell(volTable, 0, 7, "DELTA", text_color=color.gray, text_size=size.tiny, text_halign=text.align_right)
    string deltaText = deltaBullish ? "ğŸ“ˆ BUYERS" : deltaBearish ? "ğŸ“‰ SELLERS" : "NEUTRAL"
    color deltaColor = deltaBullish ? color.new(#00E676, 0) : deltaBearish ? color.new(#FF5252, 0) : color.gray
    table.cell(volTable, 1, 7, deltaText, text_color=deltaColor, text_size=size.tiny, text_halign=text.align_left)
    
    // Killzone indicator
    table.cell(volTable, 0, 8, "SESSION", text_color=color.gray, text_size=size.tiny, text_halign=text.align_right)
    string kzText = inKillzone ? "ğŸ¯ KILLZONE" : "OFF-HOURS"
    color kzColor = inKillzone ? color.new(#FFD700, 0) : color.gray
    table.cell(volTable, 1, 8, kzText, text_color=kzColor, text_size=size.tiny, text_halign=text.align_left)

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// â–ˆâ–ˆâ–ˆ ALERTS â–ˆâ–ˆâ–ˆ
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
alertcondition(isSurge, title="Volume Surge", message="âš¡ Volume Sentinel: Z-Score Surge Detected on {{ticker}}")
alertcondition(isAbsorption, title="Institutional Absorption", message="ğŸ›¡ï¸ Volume Sentinel: Absorption Zone â€“ Institutional Defense on {{ticker}}")
alertcondition(participationScore >= 8, title="Apex Participation", message="ğŸ”¥ Volume Sentinel: High Institutional Participation (Score â‰¥8) on {{ticker}}")
alertcondition(bullSurge, title="Bullish Volume Surge", message="âš¡ğŸ“ˆ Volume Sentinel: BULLISH Surge on {{ticker}}")
alertcondition(bearSurge, title="Bearish Volume Surge", message="âš¡ğŸ“‰ Volume Sentinel: BEARISH Surge on {{ticker}}")

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// â–ˆâ–ˆâ–ˆ END OF SCRIPT â–ˆâ–ˆâ–ˆ
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
